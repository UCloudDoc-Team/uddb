# 路由节点扩缩容
{{indexmenu_n>99}}

路由节点的配置，包括三种类型：

**免费版：** 固定为2个节点，多租户混合部署（多个用户的免费版路由节点，会部署在同一台物理机上）， 参考QPS: 11500；

**标准版：** 默认4个节点，多租户混合部署， 后续可免费扩容到12节点，参考QPS 30000 - 100000；

**物理机版：** 用户的路由节点独享整台物理机，每台物理机部署2个节点，单台物理机参考QPS:
100000，（为确保高可用，需至少2台物理机4个节点，上限为20个节点）。

![image](/images/uddb07.png)

通过控制台，用户可以将路由节点配置在免费版、标准版和物理机版之间做升降级。如果用户已经购买了标准版，则可根据未来UDDB的QPS情况，
将路由节点个数在4-12个节点之间进行调整，以满足业务需求。这个调整是免费的。同时UDDB管理系统也内置一套动态扩容逻辑，当用户业务QPS达到当前路由节点QPS峰值的80%时，将启动自动扩容操作，增加新的路由节点，将水位降低到60%以下。

路由节点的扩缩容，对业务的影响分为三种情况：

**单纯增加路由节点：**

包括免费版升级到标准版，和标准版内部增加路由节点两种情况。 这种扩容操作对业务没有任何影响。 新路由节点启动后，
前端ULB将把业务发起的新连接建立到新节点上；而业务和UDDB之间老的数据库连接，则维持不变。

**单纯减少路由节点：**

包括标准版降级到免费版，和标准版内部删除多余节点两种情况。 这种扩容操作对业务有短暂的影响。老路由节点被删除后，
该节点上面的所有业务数据库连接，都将中断。此时，业务通过重连，可以将数据库连接建立到其他还存在的节点上。

**物理机版节点到共享路由节点（包括免费版和标准版）的升降级：**
因为部署方式的不同（物理机版本的路由节点是部署于用户独享的物理机上，免费版和标准版是多租户共用物理机），所以在物理机版和免费版/标准版之间切换时，
需要先创建新版本的路由节点，再删除老版本路由节点，这种扩容操作对业务有短暂的影响。老的路由节点被删除后，
该节点上面的所有业务数据库连接，都将中断。此时，业务通过重连，可以将数据库连接建立到其他还存在的节点上。
